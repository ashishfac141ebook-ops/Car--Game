<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>2D Car Game with Flowers</title>
<style>
body{margin:0;display:grid;place-items:center;height:100vh;background:#111}
canvas{background:#2b2b2b;box-shadow:0 8px 20px rgba(0,0,0,.5)}
#overlay { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; display:none; }
#botwaText { font-size:44px; font-weight:bold; background:linear-gradient(90deg,#ffb347,#ffcc33); -webkit-background-clip:text; -webkit-text-fill-color:transparent; text-shadow:0 0 18px rgba(255,200,0,0.6);}
#restartBtn {margin-top:18px; padding:10px 22px; font-size:18px; border:none; border-radius:8px; background:linear-gradient(90deg,#ffb347,#ffcc33); color:#222; font-weight:bold; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.4); transition:0.2s;}
#restartBtn:hover { transform: scale(1.07);}
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>
<div id="overlay">
  <div id="botwaText">Botwa</div>
  <button id="restartBtn">Restart</button>
</div>

<script>
const c = document.getElementById("game");
const ctx = c.getContext("2d");
const overlay = document.getElementById("overlay");
const restartBtn = document.getElementById("restartBtn");

// ðŸŽµ Sounds
const coinSound = new Audio("coin.mp3");
const boosterSound = new Audio("Saroj.mp3");
const mahiSound = new Audio("Mahi.mp3");
const ashishSound = new Audio("Ashish.mp3");
let audioEnabled=false;
document.addEventListener('keydown', ()=>{ audioEnabled=true; }, {once:true});

// Road & Lanes
const road = { left: 60, width: 280, lanes: 3 };
const laneW = road.width/road.lanes;
const laneCenters = [ road.left+laneW*0.5, road.left+laneW*1.5, road.left+laneW*2.5 ];

// Player
const carImg = new Image(); carImg.src="Dada.png";
const car={x:laneCenters[1]-20,y:500,w:50,h:80,speed:260,jumping:false,jumpY:500,vy:0,boost:false,boostTimer:0,scale:1};

// Keys
const keys={};
addEventListener("keydown",e=>{keys[e.key]=true;});
addEventListener("keyup",e=>{keys[e.key]=false;});

// Images
const sabitaImg=new Image(); sabitaImg.src="Sabita.png";
const sabinaImg=new Image(); sabinaImg.src="Sabina.png";
const boosterImg=new Image(); boosterImg.src="Saroj.png";
const mahiImg=new Image(); mahiImg.src="Mahi.png";
const ashishImg=new Image(); ashishImg.src="Ashish.png";

// ðŸŒ¸ Flower background
const flowerColors = ["#ff4d6d","#ff80ab","#ffcc80","#ffff8d","#69f0ae","#82b1ff"];
let flowers = [];

// Game vars
let enemies=[],coins=[],sabinaCoins=[],ashishCoins=[],boosters=[];
let score=0,coinsCollected=0,sabinaCollected=0,ashishCollected=0;
let gameOver=false,spawnTimer=0,coinTimer=0,sabinaTimer=0,boosterTimer=0,ashishTimer=0,flowerTimer=0;
let last=performance.now();
let roadScroll=0, boosterGlow=0, tilt=0;

// Distance control
function canSpawn(newObj, list, minDist=120){
  for(let o of list){
    if(Math.abs(o.y - newObj.y) < minDist) return false;
  }
  return true;
}

// Helper
function aabb(a,b){return!(a.x+a.w<b.x||a.x>b.x+b.w||a.y+a.h<b.y||a.y>b.y+b.h);}

// Reset
function reset(){
  enemies=[];coins=[];sabinaCoins=[];ashishCoins=[];boosters=[];flowers=[];
  score=0;coinsCollected=0;sabinaCollected=0;ashishCollected=0;
  gameOver=false; spawnTimer=coinTimer=sabinaTimer=boosterTimer=ashishTimer=flowerTimer=0;
  car.x=laneCenters[1]-20; car.y=500; car.jumping=false; car.jumpY=500; car.vy=0; car.scale=1;
  car.boost=false; car.speed=260;
  roadScroll=0; boosterGlow=0; tilt=0;
  overlay.style.display="none"; last=performance.now();
  requestAnimationFrame(loop);
}

// ðŸŒ¸ Draw flowers
function drawFlowers(){
  flowers.forEach(f=>{
    ctx.beginPath();
    ctx.fillStyle=f.color;
    ctx.arc(f.x,f.y,f.size,0,Math.PI*2);
    ctx.fill();
  });
}

// Road
function drawRoad(){
  ctx.fillStyle="#1b5e20"; ctx.fillRect(0,0,road.left,c.height);
  ctx.fillRect(road.left+road.width,0,c.width-(road.left+road.width),c.height);
  ctx.fillStyle="#444"; ctx.fillRect(road.left,0,road.width,c.height);
  ctx.strokeStyle="white"; ctx.lineWidth=2; ctx.setLineDash([20,20]);
  ctx.beginPath();
  for(let i=1;i<road.lanes;i++){ ctx.moveTo(road.left+i*laneW,roadScroll%40-40); ctx.lineTo(road.left+i*laneW,c.height);}
  ctx.stroke(); ctx.setLineDash([]);
}

// Draw Car
function drawCar(){
  let yPos=car.jumping?car.jumpY:car.y;
  ctx.save();
  ctx.fillStyle="rgba(0,0,0,0.3)";
  let shadowScale=Math.max(0.5,1-((500-yPos)/250));
  ctx.beginPath(); ctx.ellipse(car.x+car.w/2,580,car.w*0.8*shadowScale,12*shadowScale,0,0,Math.PI*2); ctx.fill();
  ctx.restore();
  tilt = keys["ArrowRight"]?Math.min(tilt+0.1,0.3):keys["ArrowLeft"]?Math.max(tilt-0.1,-0.3):tilt*0.9;
  ctx.save(); ctx.translate(car.x+car.w/2,yPos+car.h/2); ctx.rotate(tilt); ctx.scale(car.scale,car.scale);
  if(carImg.complete && carImg.naturalWidth>0) ctx.drawImage(carImg,-car.w/2,-car.h/2,car.w,car.h);
  else{ctx.fillStyle="red"; ctx.fillRect(-car.w/2,-car.h/2,car.w,car.h);}
  ctx.restore();
}

// Draw Mahi enemy with glow
function drawMahi(e){
  ctx.save();
  ctx.shadowColor="cyan";
  ctx.shadowBlur=25;
  ctx.drawImage(mahiImg,e.x,e.y,e.w,e.h);
  ctx.restore();
}

// Main loop
function loop(ts){
  let dt=(ts-last)/1000; last=ts;
  if(gameOver){drawFlowers(); drawRoad(); drawCar(); return;}
  roadScroll+=car.speed*dt*0.1;

  // Movement
  if(keys["ArrowLeft"]) car.x=Math.max(road.left,car.x-200*dt);
  if(keys["ArrowRight"]) car.x=Math.min(road.left+road.width-car.w,car.x+200*dt);

  // Jump
  if(keys[" "] && !car.jumping){car.jumping=true; car.vy=-480;}
  if(car.jumping){car.jumpY+=car.vy*dt; car.vy+=1200*dt; if(car.jumpY>=500){car.jumping=false; car.jumpY=500; car.vy=0;}}

  // Spawn objects with spacing
  spawnTimer+=dt; coinTimer+=dt; sabinaTimer+=dt; boosterTimer+=dt; ashishTimer+=dt; flowerTimer+=dt;

  if(spawnTimer>2){spawnTimer=0; 
     let lane=Math.floor(Math.random()*3); 
     enemies.push({x:laneCenters[lane]-20,y:-80,w:50,h:80}); 
  }
  if(coinTimer>2){coinTimer=0; let lane=Math.floor(Math.random()*3); let newObj={x:laneCenters[lane]-15,y:-40,w:50,h:50,img:sabitaImg}; if(canSpawn(newObj,coins)&&canSpawn(newObj,sabinaCoins)&&canSpawn(newObj,ashishCoins)) coins.push(newObj);}
  if(sabinaTimer>9){sabinaTimer=0; let lane=Math.floor(Math.random()*3); let newObj={x:laneCenters[lane]-15,y:-40,w:50,h:50,img:sabinaImg}; if(canSpawn(newObj,coins)&&canSpawn(newObj,sabinaCoins)&&canSpawn(newObj,ashishCoins)) sabinaCoins.push(newObj);}
  if(boosterTimer>6){boosterTimer=0; let lane=Math.floor(Math.random()*3); boosters.push({x:laneCenters[lane]-30,y:-60,w:60,h:60});}
  if(ashishTimer>6){ashishTimer=0; let lane=Math.floor(Math.random()*3); let newObj={x:laneCenters[lane]-20,y:-40,w:50,h:50,img:ashishImg}; if(canSpawn(newObj,coins)&&canSpawn(newObj,sabinaCoins)&&canSpawn(newObj,ashishCoins)) ashishCoins.push(newObj);}
  if(flowerTimer>0.3){flowerTimer=0; flowers.push({x:Math.random()*c.width,y:-10,size:Math.random()*6+4,color:flowerColors[Math.floor(Math.random()*flowerColors.length)]});}

  // Move objects
  enemies.forEach(e=>e.y+=car.speed*dt);
  coins.forEach(o=>o.y+=car.speed*dt);
  sabinaCoins.forEach(o=>o.y+=car.speed*dt);
  boosters.forEach(b=>b.y+=car.speed*dt);
  ashishCoins.forEach(a=>a.y+=car.speed*dt);
  flowers.forEach(f=>f.y+=car.speed*dt*0.3);

  // Collision
  enemies=enemies.filter(e=>{if(aabb({...car,y:car.jumping?car.jumpY:car.y},e)){ gameOver=true; overlay.style.display="block"; return false;} return e.y<c.height+100;});
  coins=coins.filter(o=>{if(aabb({...car,y:car.jumping?car.jumpY:car.y},o)){ score+=10; coinsCollected++; if(audioEnabled) coinSound.play(); return false;} return o.y<c.height+50;});
  sabinaCoins=sabinaCoins.filter(o=>{if(aabb({...car,y:car.jumping?car.jumpY:car.y},o)){ score+=10; sabinaCollected++; if(audioEnabled) coinSound.play(); return false;} return o.y<c.height+50;});
  boosters=boosters.filter(b=>{if(aabb({...car,y:car.jumping?car.jumpY:car.y},b)){ car.boost=true; car.speed=400; car.scale=1.2; car.boostTimer=3; boosterGlow=1; if(audioEnabled) boosterSound.play(); return false;} return b.y<c.height+60;});
  ashishCoins=ashishCoins.filter(a=>{if(aabb({...car,y:car.jumping?car.jumpY:car.y},a)){ score+=10; ashishCollected++; if(audioEnabled) ashishSound.play(); return false;} return a.y<c.height+50;});
  flowers=flowers.filter(f=>f.y<c.height+20);

  // Booster
  if(car.boost){car.boostTimer-=dt; boosterGlow=Math.max(0,boosterGlow-0.02); if(car.boostTimer<=0){car.boost=false; car.speed=260; car.scale=1;}}

  // Draw
  ctx.clearRect(0,0,c.width,c.height);
  drawFlowers();
  drawRoad();
  enemies.forEach(e=>drawMahi(e));
  coins.forEach(o=>ctx.drawImage(o.img,o.x,o.y,o.w,o.h));
  sabinaCoins.forEach(o=>ctx.drawImage(o.img,o.x,o.y,o.w,o.h));
  boosters.forEach(b=>ctx.drawImage(boosterImg,b.x,b.y,b.w,b.h));
  ashishCoins.forEach(a=>ctx.drawImage(a.img,a.x,a.y,a.w,a.h));
  drawCar();

  ctx.fillStyle="white"; ctx.font="16px Arial";
  ctx.fillText("Score: "+score,10,20);
  ctx.fillText("Sabita: "+coinsCollected,10,40);
  ctx.fillText("Sabina: "+sabinaCollected,10,60);
  ctx.fillText("Ashish: "+ashishCollected,10,80);

  if(!gameOver) requestAnimationFrame(loop);
}

restartBtn.onclick=reset;
reset();
</script>
</body>
</html>
